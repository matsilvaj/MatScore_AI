{% extends "layout.html" %}

{% block styles %}

{% endblock %}

{% block content %}
<h1>Configurações da Conta</h1>

<div class="account-section">
    <h2>Meu Plano</h2>
    <p>Utilizador: <strong>{{ current_user.username }}</strong></p>
    <p>Email: <strong>{{ current_user.email }}</strong></p>
    <p>Plano Atual: <strong style="text-transform: capitalize;">{{ current_user.subscription_tier }}</strong></p>
    {% if current_user.subscription_tier == 'free' %}
        <a href="{{ url_for('main.plans') }}" class="btn">Fazer Upgrade</a>
    {% endif %}
</div>

<div class="account-section">
    <h2>Alterar Senha</h2>
    <form method="POST" action="{{ url_for('main.change_password') }}">
        <div class="form-group">
            <label for="current_password">Senha Atual</label>
            <input type="password" id="current_password" name="current_password" required>
        </div>
        <div class="form-group">
            <label for="new_password">Nova Senha</label>
            <input type="password" id="new_password" name="new_password" required minlength="6">
        </div>
        <button type="submit" class="btn">Salvar Nova Senha</button>
    </form>
</div>

<div class="account-section danger-zone">
    <h2>Excluir Conta</h2>
    <p>Atenção: Esta ação é irreversível. Todos os seus dados serão permanentemente apagados.</p>
    <form method="POST" action="{{ url_for('main.delete_account') }}" onsubmit="return confirm('Tem a certeza absoluta que deseja excluir a sua conta? Esta ação não pode ser desfeita.');">
        <button type="submit" class="btn btn-danger">Excluir Minha Conta</button>
    </form>
</div>
{% endblock %}